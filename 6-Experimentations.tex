


\section{PAMELA industrial use cases and experiments}
\label{sec:validation}

 The PAMELA framework has been successfully applied in a variety of complex programming and modeling scenarios and we continue to use it daily as part of our modeling toolbox. In the following, we describe three important uses cases in which PAMELA was a core component.

%\todo[inline]{General comment: I would change the title of the section to something like, Pamela Use cases, Pamela success stories or something of the like. The idea here is to show that pamela is a tool that is used and solve problems. In that sense, the fact that pamela powers Open flexo should be highlighted. In the same sense, the importance of the patterns and security should be reduced and limited to the fact that pamela allows it (the point being, to cite the workshop paper). I believe giving details of how patterns are implemented  here will distract the reader. technical details, if needed would be better placed in the implementation section.}

%https://pamela.openflexo.org
%https://github.com/openflexo-team/pamela

\subsection{Openflexo infrastructure}

Model Federation~\cite{Golra2016} is an approach that provides the means to
integrate multiple models conforming to different paradigms, and giving to each
stakeholder a specific view adapted to its needs. Model federation approach is
developed as a possible response to SIMF RFP (Semantic Information Modeling for
Federation)i~\cite{simf-rfp} by OMG (Object Modeling Group). This RFP (Request For Proposal)
requests submissions for a standard addressing, ”federation of information
across different representations, levels of abstraction, communities,
organizations, viewpoints, and authorities”. Thus model federation allows the
integration of heterogeneous models to develop new cross-concern
viewpoints/models or to synchronize the models used for designing a system. 

Openflexo\cite{OpenflexoWebSite} is a software infrastructure providing support
for model federation across multiple technological spaces. Conceptualization is
addressed trough the proposition of a language called FML (Flexo Modeling
Language), which is executable on the platform. Openflexo infrastructure
introduces connectors (also called Technology Adapters) to support various
technological spaces and paradigms.

This open source initiative is now mature at the infrastructure level, and many
projects and applications have been developed and powered using Openflexo
infrastructure. More than 15 technology adapters have been developed, with
various maturity stage regarding their industrialization (Microsoft Word, Excel
and PowerPoint, EMF, OWL, Diagramming, JDBC, XML, OSLC, etc...)

\sg{
The full Openflexo infrastructure is composed of about 50 components. In most components, PAMELA framework is extensively used. As an example \texttt{diana} component\footnote{\url{https://diana.openflexo.org}} (a component providing diagramming features) is composed of 998 classes. 159 of those classes (mostly the diagramming model) are defined as Pamela \texttt{ModelEntity}. 
}

The total base of code for Openflexo infrastructure represents around 900.000
lines of Java code. Regarding backend modeling, the PAMELA framework is
extensively used in Openflexo core as well as in most technology adapters, with
very few specific implementations for properties. The observer/observable
pattern is generally used for graphical user interfaces, which also rely on
PAMELA framework. 

\sg{
An interesting experimentation has been done in the context of Openflexo development process. When Pamela has been integrated to the code base, a big portion of former legacy code has gradually and iteratively been migrated to Pamela. Refactoring mainly consisted in removing code, and replacing method implementation by API method declaration. In some parts of core model implementation, code has been reduced by 80\% (in terms of lines of Java code), and many bugs disappeared, as they were caused by programming errors.
}

\sg{
Pamela implementation is now really stable and mature. According to Openflexo infrastructure developers, maintenance of code base (about 10 years of development) raises no Pamela-specific issue, while co-evolution of model and code is greatly improved compared to a "code generation"-based solution.
}

% Continuous integration ?

\subsection{Formose project}

The Formose ANR (french National Agency for Research) project
(ANR-14-CE28-0009)\cite{FormoseWebSite} aimed to design a formally-grounded,
model-based requirements engineering (RE) method for critical complex systems,
supported by an open-source environment. The main partners were: ClearSy, LACL,
Institut Mines-Telecom, OpenFlexo, and THALES. 

The main results of the project are a requirements modeling multi-views
language, its associated design process and the development of an opensource
platform called Formod\cite{FormodWebSite}, built using Openflexo
infrastructure and PAMELA framework. \todo{Say how and where PAMELA was used}
The requirements modeling language is based on KAOS~\cite{kaos} for goal
modeling and SysML for the structural part of a system. The associated domain
modeling language, used to describe system domain knowledge, extends the two
ontology languages OWL~\cite{owl} and PLIB~\cite{plib}. The graphical notations
are then translated into Event-B~\cite{eventb}, a formal specification method supported by verification tools. 

\todo{Remark that it is industry ready}

The Formose method and Formod tool have been evaluated on different case studies provided by the industrial partners of the project.



\subsection{SecurityPatterns experiment}

A significant experiment in PAMELA is the implementation of security patterns weaved on domain code \cite{silva20}.
In this context, the PAMELA framework is extended to include the notion of Pattern, i.e. a composition of multiple classes. Included to this experiment, the security pattern is specified by expected behavior defined and formalized by a pattern contract. This contract is defined by formal properties and the PAMELA framework ensures the property verification at runtime.

Related to the security pattern implementation, PAMELA enables the definition of additional security behavior to existing Java code.
Patterns are defined in PAMELA using three classes, each one representing a different conceptual level \texttt{PatternFactory}, \texttt{PatternDefinition}, \texttt{PatternInstance}.

To declare a Pattern on existing code, pattern elements such as Pattern Stakeholders and methods need to be annotated with provided security pattern-specific annotations. These annotations will be discovered at runtime by the \texttt{PatternFactory} and stored in \texttt{PatternDefinition} attributes.


Summarizing, implementing Patterns with PAMELA provides the ability to monitor the execution of the application code; the ability to offer extra structural and behavioral features, executed by the PAMELA interpreter; a representation of Patterns as stateful objects. Such objects can then evolve throughout runtime and compute assertions.





%\subsection{Performance issues}

% parler des problèmes de perfs

%\subsection{Syntaxic issues}

% Problème d'un truc trop verbeux > editeur graphique
