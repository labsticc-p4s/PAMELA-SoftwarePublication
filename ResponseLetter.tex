% Title:    A LaTeX Template For Responses To a Referees' Reports
% Author:   Petr Zemek <s3rvac@gmail.com>
% Homepage: https://blog.petrzemek.net/2016/07/17/latex-template-for-responses-to-referees-reports/
% License:  CC BY 4.0 (https://creativecommons.org/licenses/by/4.0/)
\documentclass[10pt]{article}

% Allow Unicode input (alternatively, you can use XeLaTeX or LuaLaTeX)
\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{todonotes}

\usepackage{microtype,xparse,tcolorbox}
\newenvironment{reviewer-comment }{}{}
\tcbuselibrary{skins}
\tcolorboxenvironment{reviewer-comment }{empty,
  left = 1em, top = 1ex, bottom = 1ex,
  borderline west = {2pt} {0pt} {black!20},
}
\ExplSyntaxOn
\NewDocumentEnvironment {response} { +m O{black!20} } {
  \IfValueT {#1} {
    \begin{reviewer-comment~ }
      \setlength\parindent{2em}
      \noindent
      \ttfamily #1
    \end{reviewer-comment~ }
  }
  \par\noindent\ignorespaces\color{blue}
} { \bigskip\par }

\NewDocumentCommand \Reviewer { m } {
  \section*{Comments~by~Reviewer~#1}
}

\NewDocumentCommand \ToolComments { m } {
  \section*{Tool~Comments~by~Reviewer~#1}
}

\ExplSyntaxOff
\AtBeginDocument{\maketitle\thispagestyle{empty}\noindent}

% You can get probably get rid of these definitions:
\newcommand\meta[1]{$\langle\hbox{#1}\rangle$}
\newcommand\PaperTitle[1]{``\textit{#1}''}

\title{Response letter to Manuscript SCICO-D-20-00176 entitled "PAMELA: an Annotation-Based Java Modeling Framework"}
%\author{Author1 \and Author2 \and Author3}
\date{\today}

\begin{document}

Dear Editor,

\bigskip
Thanks for your message of January 9th, 2021, in which you suggested preparing a major revision of our manuscript  \textbf{PAMELA: an Annotation-Based Java Modeling Framework}. 

\bigskip
We are grateful to the reviewers for their interest, effort, and suggestions. We detail in the following pages how we have addressed the reviewers' concerns; we are confident that the paper is now stronger, and hope that you will agree. We have organized the responses to the comments on a per-reviewer basis, focusing, as suggested, on: 

\begin{itemize}
\item Providing further details on the usage scenarios of PAMELA.
\item Provide additional details about experiments \& evaluation.
\item Improving tool documentation and examples.
\end{itemize}

Moreover, the paper has been thoroughly revised to fix minor issues and to give the additional clarifications required by the reviewers. Please let us know if you need any further information or clarification.

\bigskip
Sincerely yours,

\bigskip
Sylvain, Guillaume, Caine, Joel, Jean-Christophe, Salvador and Antoine

\pagebreak


\Reviewer{\#1}
\begin{response}{They then briefly discuss implementation details, in a single page; and then discuss 'industrial use cases and experiments'.

Unfortunately, the latter leaves much to be desired, as much of the text is spent on the context/tools in which the tool was used, but not on how it was used, nor with any quantification on how extensive its use was, or what the performance of the resulting constellation is.
} We agree with the reviewer. We have extended the manuscript in order to provide more details about PAMELA itself, its usage and its performance. Concretely, we have added code base metrics in Section 4.3., a performance evaluation and discussion in Section 4.4, and more details on the role PAMELA took in the industrial use cases and experiments described in Section 5.
\end{response}

\begin{response}{Also lacking is a more thorough comparison to existing work; your related work section gives a very shallow comparison to other approaches..}
We fully agree with the reviewer. We have expanded the related work section and compared our work with existing metamodeling and models@runtime approaches. Moreover, we have included a number of new references as suggested by Reviewer 2.
\end{response}

\begin{response}{What would also be interesting is a general discussion on performance of your tool, gains by using your tool, ...
} We discuss PAMELA performance in a new Section 4.4. We have created a workbench consisting in an small model (4 entities containing 4-5 properties) and measured how well PAMELA fares against a basic POJO implementation when dealing with large instance models.
\end{response}

\begin{response}{Your reference list is incomplete and inconsistent. Formod or Formosa? When were URLs accessed (add date). DOIs are missing. Ref. 5 should have the ISoLA track name and editors added. Ref. 7 is missing publisher, journal, conference. Inconsistent use of first names, first names + initials, first initial.}
We have expanded our reference list and fixed all (detected) insconsistencies.
\end{response}

\begin{response}{The paper highlights include "Contract programming with assertions [remove the plural] checking at runtime", yet that is not mentioned in the paper at all.
} Thank you for pointing this out. We have removed this point from the highlights as it is not on the focus of the paper.
\end{response}

\begin{response}{That also brings up the question: what about correctness of your code? Any evidence for that?}
PAMELA have been thoroughly tested. The core PAMELA implementation is accompanied with a battery of unit tests (6k lines of code and 112 classes) reaching a coverage of 66\%. We have modified the paper in order to add this information in a new Section 4.3.
\end{response}

\begin{response}{p10 l32+: very little detail or quantification on the tool's code base. Surely you can say more about its structure, size of components, ... other interesting and relevant observations on the codebase?}
The new Section 4.3. provides details about the PAMELA code base.
\end{response}

\begin{response}{Detailed comments}
We have fixed all the issued highlighted in the detailed comments.
\end{response}

\ToolComments{\#1}

\begin{response}{gives "git clone git@github.com:openflexo-team/pamela.git", which (even when using my own username) does not work. However, "git clone https://github.com/openflexo-team/pamela.git" immediately does. Why not state the latter?
}

We apologize for the inconvenience. We have replaced "git clone git@github.com:openflexo-team/pamela.git" for "git clone https://github.com/openflexo-team/pamela.git" as suggested.
\end{response}

\begin{response}{how to actually build the environment is not stated for this option.}
We apologize for the inconvenience. The PAMELA documentation and web site have been updated in order to solve the problem.
\end{response}

\begin{response}{Run tests Unit tests located in src/test/java in pamela-core are a good starting point to discover the framework." No further information is given. Apparently, the user has to figure out him/herself how to run the tests. Documentation is lacking here.
}
We agree with the reviewer. The PAMELA documentation and web site have been updated in order to improve tests understanding (see section 2.2 of "Getting started"). 
\end{response}

\begin{response}{Make your first model." And then what?
}
We have refactored the PAMELA documentation on the web site so that it redirects to the getting started guide.
\end{response}

\begin{response}{Summarizing: the *getting started* documentation is incomplete and certainly not suitable for getting started. The page "https://pamela.openflexo.org/SNAPSHOT/example.html" gives a basic example, but the relation between that and the getting started page is not made explicit, nor do the two in their current shape provide a user with a proper getting started, allowing him/her to at least (1) install the framework, (2) create a basic example, (3) use the framework with that basic example. This needs to be improved before an evaluation of the software can be completed.
}
We apologize again for the lack of clarity in the documentation. We have refactored it so that the starting point is clear and the reader is guided step by step to the realization/usage of a first model.
\end{response}


\pagebreak

\Reviewer{\#2}
\begin{response}{scenarios are missing. As a developer I don't know in which cases it is relevant to use this tool.}
We have rewritten Section 2 so that it includes now a list and brief description of typical usage scenarios for the PAMELA framework (e.g., coding-metamodeling blending, aspect-oriented programming or legacy code re-engineering). We also state that the standard PAMELA user will reuse existing annotation while more advanced users may become (meta) modelers and provide their own abstractions in a continuous modeling approach. 
\end{response}


\begin{response}{how to use the tool is not describe properly. It is not clear if the developers need to write all the annotations. If an application is built with PAMELA, what is the link between the interfaces and the concrete classes. Indeed, at one point, code corresponding to the behavior will be needed; and not only the accessors to navigate the structure of the model.}
We have modified Section 2 to clarify that standard PAMELA users will reuse existing annotations which are accompanied with default implementations in the PAMELA interpreter. Additional details are given in Sections 3 and 4 (and in the online documentation: \url{https://pamela.openflexo.org/SNAPSHOT/pamela-core/3-metaprogramming_support.html}) See Listing 3 for an example of how the default implementation can be replaced by custom ones.
\end{response}

\begin{response}{how does such "code" evolve with time? Authors have used PAMELA for years, how such applications resist with time?}
PAMELA helps factorizing code corresponding to recurrent concepts. In that sense its use does reduce the size and duplication of code, decreases the number of bugs and improves the code structure. All this makes final applications that use PAMELA (more) easily maintainable.
We briefly discuss in Section 5.1. how integrating PAMELA in the OpenFlexo tool helped removing duplicated code and eliminating bugs in the latter.
\end{response}

\begin{response}{section 2 is too abstract to be very useful}
Please, see the two first answers above where we explain how we have extended Section 2.
\end{response}

\begin{response}{p6 "according to PAMELA semantics" but it is never explained.}
We have removed this reference to PAMELA semantics in the paper. Our intention was to refer to the PAMELA metamodel.
\end{response}

\begin{response}{the partially implemented class concept is not clear.}
The partially implemented class concept is very similar to the default methods introduced in Java 8 (which were not available when PAMELA was first created) permitting a sort of multiple inheritance. We have clarified this in the paper.
\end{response}

\begin{response}{the additional features seem relevant, but they are not described. Either the authors describe them a bit more or they remove the section.}
Describing the additional features would require quite a bit of text and the risk of taking the focus of the reader away from the main features of the framework. We have thus decided to keep the section short but alleviate the problem pointed out by the reviewer by adding a link to the PAMELA web site where all these additional features are listed and extensively described.
\end{response}


\begin{response}{in section 3.4 it is not clear who writes what and at which step of the development process.}
With respect to Listing 1 and 2, everything is written by the user which uses default PAMELA annotations so that the models it is defining (together with the code) may be created and manipulated directly (i.e., without the need for providing implementation for common tasks like model instance creation or attribute access). It is then the PAMELA interpreter that takes care of providing this aforementioned default behavior (in order to ease the discussion, Section 3.4. has been enriched with links to the Figure 2 where the PAMELA approach is depicted). Finally, the end of Section 3 shows how the user may write custom code that would replace the default behavior provided by the PAMELA interpreter (see Listing 3).
\end{response}

\begin{response}{in section 5, the use of PAMELA in the two projects is not clear.}
We have extended Section 5 in order to add details with respect to the usage of PAMELA. Notably, in Section 5.1. many details have been included describing how PAMELA is extensively used within the OpenFlexo tool for every aspect involving model entities, including graphical user interfaces. Additionally, we report on how integrating PAMELA in OpenFlexo helped reducing code duplication and eliminating bugs.
\end{response}

\begin{response}{references are missing. For example Kermeta done, Platypus (from Alain Plantec), work of Glenn Cavarle and others from the model @runtime community.}
We have extended the related work section in order to discuss the suggested related works (among others).
\end{response}


\begin{response}{in section 6, the authors write: "PAMELA does not focus in reflecting and manipulating running systems but in: 1) extending their behaviors; and 2) maintaining a continuous cycle of metamodeling... These two points are not clear previously in the paper.
}
We have removed that part as it was indeed misleading and not discussed in that form previously in the paper. We have rephrased as follows:

PAMELA is not focused on adapting or observing ever running programs (although it can be used for the verification of runtime properties as demonstrated in [20]) but on:  1) providing a mechanism to blend coding and metamodeling so that the code and the metamodel  may  be  built  incrementally  without  the  need  for  code  generation and thus,  avoiding round-tripping issues;  and 2) providing default implementations for frequently used abstractions in order to ease development.
\end{response}

\begin{response}{Minor remarks}
We have fixed all minor remarks.
\end{response}


\ToolComments{\#2}

\begin{response}{The link in the paper is not clickable and copy-and-paste does not work (because of latex?) Link found: https://github.com/openflexo-team/pamela}
Thanks for pointing this out. We have modified the latex settings so that this link (and all the others throughout the paper) is now clickable.
\end{response}

\begin{response}{Installation
The readme of the GitHub page should link to the installation page found in https://pamela.openflexo.org. It is unclear we must visit this web site to install the tool.
}
Thanks again. We completely agree. We have included a link to the PAMELA web site in the readme of the GitHub repository.
\end{response}

\begin{response}{
What I have done

Create a new project in Intellij Idea with gradle
Add the line found in \url{https://pamela.openflexo.org/SNAPSHOT/getting_started.html}

- Test 1: Create a model with only one entity without error

- Test 2: Create the example of the paper

--->Bug: in Listing2, the authors execute Line9 ".setName" but the method does not exists
Else, the example works.


}
We had indeed overlooked the bug on line 9. Thanks for pointing it out. We have removed that line from the listing.
\end{response}


\end{document}
